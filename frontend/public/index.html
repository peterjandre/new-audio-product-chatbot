<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Products Chatbot - RAG-Powered Search</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ New Audio Products Chatbot</h1>
            <p class="subtitle">RAG-Powered Search Engine for Audio Production Gear</p>
        </header>

        <main>
            <div class="search-section">
                <form id="queryForm" class="query-form">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="questionInput" 
                            placeholder="Ask about audio products, gear, or synthesizers..." 
                            required
                            autocomplete="off"
                        >
                        <button type="submit" id="submitBtn">
                            <span class="btn-text">Search</span>
                            <span class="btn-loader" style="display: none;">‚è≥</span>
                        </button>
                    </div>
                    <div class="advanced-options">
                        <label>
                            <span>Results:</span>
                            <select id="kSelect">
                                <option value="5" selected>5</option>
                                <option value="10">10</option>
                                <option value="15">15</option>
                                <option value="20">20</option>
                            </select>
                        </label>
                        <label>
                            <span>Temperature:</span>
                            <input type="range" id="tempSlider" min="0" max="20" value="3" step="1">
                            <span id="tempValue">0.3</span>
                        </label>
                    </div>
                </form>
            </div>

            <div id="resultsSection" class="results-section" style="display: none;">
                <div class="question-display">
                    <h2>Question:</h2>
                    <p id="displayedQuestion"></p>
                </div>

                <div class="answer-section">
                    <h2>Answer:</h2>
                    <div id="answerContent" class="answer-content"></div>
                </div>

                <div class="sources-section">
                    <h2>Sources:</h2>
                    <div id="sourcesList" class="sources-list"></div>
                </div>
            </div>

            <div id="errorSection" class="error-section" style="display: none;">
                <div class="error-message">
                    <span class="error-icon">‚ö†Ô∏è</span>
                    <p id="errorText"></p>
                </div>
            </div>
        </main>

        <footer class="about-section">
            <h2>About This Project</h2>
            <div class="about-content">
                <p>
                    This is a Retrieval-Augmented Generation (RAG) chatbot that answers questions about 
                    audio production gear by searching through posts from Gearspace.com.
                </p>
                
                <h3>How It Works</h3>
                <ol>
                    <li><strong>Data Collection:</strong> The system scrapes RSS feeds from Gearspace.com and generates concise summaries of each post.</li>
                    <li><strong>Embedding Generation:</strong> OpenAI's embedding model converts the text summaries into high-dimensional vectors for semantic search.</li>
                    <li><strong>Vector Index:</strong> FAISS (Facebook AI Similarity Search) creates an efficient index for fast similarity search across thousands of posts.</li>
                    <li><strong>Query Processing:</strong> When you ask a question, the system:
                        <ul>
                            <li>Converts your question into an embedding vector</li>
                            <li>Searches the FAISS index for the most relevant posts</li>
                            <li>Retrieves the top-k most similar posts</li>
                            <li>Uses OpenAI GPT to generate a contextual answer based on the retrieved posts</li>
                        </ul>
                    </li>
                    <li><strong>Response Generation:</strong> The LLM synthesizes information from multiple sources to provide a comprehensive answer with citations.</li>
                </ol>

                <h3>Technologies Used</h3>
                <div class="tech-grid">
                    <div class="tech-item">
                        <strong>Backend:</strong> FastAPI (Python)
                    </div>
                    <div class="tech-item">
                        <strong>LLM Provider:</strong> OpenAI GPT-3.5/GPT-4
                    </div>
                    <div class="tech-item">
                        <strong>Embeddings:</strong> OpenAI text-embedding-ada-002
                    </div>
                    <div class="tech-item">
                        <strong>Vector Database:</strong> FAISS (Facebook AI Similarity Search)
                    </div>
                    <div class="tech-item">
                        <strong>Data Source:</strong> Gearspace.com RSS Feed
                    </div>
                    <div class="tech-item">
                        <strong>Frontend:</strong> TypeScript, HTML5, CSS3
                    </div>
                </div>

                <h3>Key Features</h3>
                <ul>
                    <li>Semantic search across thousands of audio gear discussions</li>
                    <li>Configurable retrieval parameters (number of results, temperature)</li>
                    <li>Source citations with relevance scores</li>
                    <li>RESTful API architecture</li>
                    <li>Real-time query processing</li>
                </ul>
            </div>
        </footer>
    </div>

    <script>
        // Set API base URL from environment variable or use default
        window.API_BASE_URL = '{{API_BASE_URL}}' || '';
    </script>
    <script src="/script.js"></script>
</body>
</html>

